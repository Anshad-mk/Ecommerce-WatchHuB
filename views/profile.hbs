
<!-- ANOTHER PROFILE VIEW -->
<section class="container mt-5 mb-5 mb-100">
	<div class="row">
		<div class="col-md-4 ">
			<div class="shadow rounded p-3 text-center rounded">
				<img class="userProfile mx-auto" style="width: 100px; height: 100px;"
					src="data:image/png;base64,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"
					alt="">
				<h5 class="mt-3">{{profileData.firstName}}<span class="ms-2">{{profileData.LastName}}</span> </h5>
			</div>

			<div class="shadow rounded mt-3 p-3">
				<h6 class="fw-normal"><button data-bs-toggle="modal" data-bs-target="#exampleModal"
						class="text-secondary btn btn-outline-dark">Address</button>
				</h6>
				<h6 class="fw-normal"><a href="/users/viewOrder" class="text-secondary btn btn-outline-dark ">My Orders
					</a></h6>


				<h6 class="fw-normal"><a href="/changepassword" class="text-secondary btn btn-outline-dark">Change
						Password</a></h6>
				<h6 class="fw-normal"><a class="text-secondary btn shadow-lg " data-bs-toggle="modal" data-bs-target="#wallet_modal">Wallet<span
							class="ms-3 text-success btn fw-bold"> â‚¹ {{profileData.Wallet}}<span>.00</span></span></a></h6>
				<h6 class="fw-normal"><a class="text-secondary btn shadow-lg">Referal Cod<span
							class="ms-1 text-dark btn fw-bold">:<span id="copybtn">{{profileData.referal}}</span> <i onclick="myFunction()" class="bi bi-clipboard" id="hh" ></i> </label> </span></a><span class="text-success" id="success_1"></span></h6>
							
			</div>
		</div>
		<div class="col-md-8 ">
			<div class="shadow p-3 rounded">
				<table class="table table-borderless ">
					<thead>
						<tr>
							<th colspan="2" class="border-0">
								<h3>Profile Details</h3>
							</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td class="border-0 text-secondary mb-1 shadow" width="30%">First Name</td>
							<td class="border-0 text-secondary">: <span class="ms-2">
									<input type="text" style="outline: none;" name="Name" id="Fname"
										value="{{profileData.firstName}}" required>
								</span> </td>
						</tr>
						<tr>
							<td class="text-secondary mb-1 shadow">Last Name</td>
							<td class="text-secondary">: <span class="ms-2">
									<input type="text" style="outline: none;" name="Name" id="Lname"
										value="{{profileData.LastName}}" required>
								</span> </td>
						</tr>
						<tr>
							<td class="text-secondary mb-1 shadow">Email ID</td>
							<td class="text-secondary">: <span class="ms-2">
									<input type="text" style="outline: none;" name="Name" id="Email"
										value="{{profileData.email}}" required>
								</span> </td>
						</tr>
						<tr>
							<td class="text-secondary shadow mb-1">Mobile Number</td>
							<td class="text-secondary">: <span class="ms-2">
									<input type="text" style="outline: none;" name="Name" id="Number"
										value="{{profileData.number}}" required>
								</span> </td>
						</tr>
						<tr>
							<td class=" text-center pt-3" colspan="2">
								<button onclick="Update()" class="btn btn-outline-dark">Edit & Update</button>
							</td>
						</tr>
					</tbody>
				</table>

			</div>

			<div class="shadow ps-3 pt-3 overflow-auto " style="width: 100%; height: auto;">
				<h2 class="btn-lg shadow me-3 text-center"> Address </h2>




				<div class="address">
					<table class="table">
						<thead>
						</thead>
						<tbody>
							{{#each address.Address}}
							<tr>

								<th>
									{{inc @index}}
								</th>
								<td>{{this.Fname}} {{this.Lname}},{{this.Address}}, {{this.post}}, {{this.pin}},
									{{this.state}}, {{this.phone}}</td>
								<td><button class="btn btn-danger" style="width: 4rem;"
										onclick=" deleteAddress(`{{this.uniqId}}`,'{{../profileData._id}}')">delete</button>

								</td>
								<td>
									<a href="/users/EditAddress/{{@index}}" class="btn btn-primary"
										style="width: 4rem;">Edit
									</a>
								</td>
							</tr>
							{{/each}}
						</tbody>
					</table>
				</div>

			</div>

		</div>
	</div>

	</div>
</section>

<!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="text-center" id="exampleModalLabel">Edit Address</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">



				<form class="border p-4" action="/users/address" id="address-form" method="post"
					onsubmit="return saveaddrFn()">
					<div class="row g-3">
						<div class="col-sm-6">
							<label for="FName" class="form-label">First name</label>
							<input type="text" class="form-control" name="FirstName" id="FName" placeholder="" value=""
								data-msg="Please fill this field" onkeyup="return fname()">
							<div class="text-danger" id="FNameErr"></div>
						</div>



						<div class="col-sm-6">
							<label for="LName" class="form-label">Last name</label>
							<input type="text" class="form-control" id="LName" name="LastName" placeholder="" value=""
								onkeyup="return lname()">
							<div class="text-danger" id="LNameErr"></div>
						</div>
						<div class="col-12">
							<label for="address" class="form-label">Address</label>
							<input type="text" class="form-control" name="Address" id="addressValue"
								placeholder="Full Address" onkeyup="return Addressfn()">
							<div class="text-danger" id="AddressErr"></div>
						</div>


						<div class="col-12">
							<label for="address2" class="form-label"> Mobile Number <span
									class="text-muted"></span></label>
							<input type="tel" class="form-control" name="Phone" id="phoneNo" maxlength="10"
								placeholder="Number" onkeyup="return Validatemobile()">
							<div class="text-danger" id="phoneErr"></div>
						</div>

						<div class="col-md-5">
							<label for="Post" class="form-label">Post</label>
							<input type="text" class="form-control" name="Post" id="Post" placeholder=""
								onkeyup="return postfn()">
							<div class="text-danger" id="postErr"></div>
						</div>

						<div class="col-md-3">
							<label for="zip" class="form-label">Zip Code</label>
							<input type="number" maxlength="6" name="ZipCode" class="form-control" id="zip"
								placeholder="" onkeyup="return checkpinCode()">
							<div class="text-danger" id="zipErr"></div>
						</div>

						<div class="col-md-3">
							<label for="State" class="form-label">State</label>
							<input type="text" class="form-control" name="State" id="StatE" placeholder=""
								onkeyup="return StateFn()">
							<div class="text-danger" id="StateErr"></div>
						</div>
					</div>
					<div class="text-danger" id="FormErr"></div>

					<hr class="my-4">

					<button class="w-100 btn btn-primary btn-lg" type="submit">Save Address </button>
				</form>



			</div>
			{{!-- <div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary">Save changes</button>
			</div> --}}
		</div>
	</div>
</div>

{{!-- wallet transaction modal --}}
<!-- Modal -->
<div class="modal fade" id="wallet_modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...                          
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


{{!-- wallet transaction modal --}}



<script>
	function Update() {
		let fname = document.getElementById('Fname').value
		let lname = document.getElementById('Lname').value
		let email = document.getElementById('Email').value
		let number = document.getElementById('Number').value

		$.ajax({
			ure: '/users/Profile',
			method: 'post',
			data: {
				firstName: fname,
				LastName: lname,
				email: email,
				number: number,
			},
			success: (Response) => {
				Swal.fire({
					position: "top-end",
					icon: "success",
					title: "profile Updated",
					showConfirmButton: false,
					timer: 1000,
				});
				location.reload();
			}
		})

	}

	function deleteAddress(iddate, userId) {
		Swal.fire({
			title: 'Do you want to Delete ?',
			showCancelButton: true,
			confirmButtonText: 'Delete',

		}).then((result) => {
			/* Read more about isConfirmed, isDenied below */
			if (result.isConfirmed) {

				$.ajax({
					url: '/users/deleteAddress',
					method: 'get',
					data: {
						date: iddate,
						UserID: userId
					},
					success: (response) => {
						Swal.fire('Deleted !', '', 'success')
						location.reload();
					}
				})

			} else {
				Swal.fire('Canceled', '', 'info')
			}
		})



	}




	function Addressfn() {
		let street = document.getElementById('addressValue').value
		let streetErr = document.getElementById('AddressErr')
		if (street.length <= 3 || street == '') {
			streetErr.innerHTML = 'Enter valid details'
			return false;
		}
		streetErr.innerHTML = ''
		return true;
	}

	function postfn() {
		let street = document.getElementById('Post').value
		let streetErr = document.getElementById('postErr')
		if (street.length <= 3 || street == '') {
			streetErr.innerHTML = 'Enter valid details'
			return false;
		}
		streetErr.innerHTML = ''
		return true;
	}

	function StateFn() {
		let street = document.getElementById('StatE').value
		let countryErr = document.getElementById('StateErr')
		if (street.length <= 3 || street == '') {
			countryErr.innerHTML = 'Enter valid details'
			return false;
		}
		countryErr.innerHTML = ''
		return true;
	}

	function checkpinCode() {
		let street = document.getElementById('zip').value
		let pinErr = document.getElementById('zipErr')
		if (street.length < 6 || street == '') {
			pinErr.innerHTML = 'Enter Proper PinCode'
			return false;
		}
		pinErr.innerHTML = ''
		return true;
	}
	function Validatemobile() {
		let mob = document.getElementById('phoneNo').value
		let mob_err = document.getElementById('phoneErr')

		if (mob.length != 10) {
			mob_err.innerHTML = 'Enter Proper Number'
			return false;
		}

		mob_err.innerHTML = ''
		return true;
	}
	function fname() {
		let name_err = document.getElementById('FNameErr')
		let name = document.getElementById('FName').value;

		if (name.length == 0 || name == '') {
			name_err.innerHTML = "Name cannot be empty";
			return false;
		}

		if (!name.match(/^[A-Za-z]*\s{0,1}?[A-Za-z]*\s{0,1}?[A-Za-z]*$/)) {
			name_err.innerHTML = "Write Proper name";
			return false;
		}

		if (name.length <= 3 || name.length >= 25) {
			name_err.innerHTML = "Name must be between 3 and 25 characters";
			return false;
		}

		name_err.innerHTML = ""
		return true;
	}
	function lname() {
		let name_err = document.getElementById('LNameErr')
		let name = document.getElementById('LName').value;

		if (name.length == 0 || name == '') {
			name_err.innerHTML = "Name cannot be empty";
			return false;
		}

		if (!name.match(/^[A-Za-z]*\s{0,1}?[A-Za-z]*\s{0,1}?[A-Za-z]*$/)) {
			name_err.innerHTML = "Write Proper name";
			return false;
		}

		if (name.length <= 1 || name.length >= 25) {
			name_err.innerHTML = "Name must be between 1 and 25 characters";
			return false;
		}

		name_err.innerHTML = ""
		return true;
	}

	function saveaddrFn() {
		if (!lname() || !fname() || !Validatemobile() || !checkpinCode() || !StateFn() || !postfn() || !Addressfn()) {
			document.getElementById('FormErr').innerHTML = 'Fill All data First'
			return false;
		} else {
			return true;
		}

	}

function myFunction() {
  // Get the text field

let copyText = document.getElementById('copybtn').innerHTML

  // Copy the text inside the text field
  navigator.clipboard.writeText(copyText);
  document.getElementById('success_1').innerHTML='Copied'
  
  setTimeout(()=>{
	document.getElementById('success_1').innerHTML=''

  },1000)

}




</script>